# 币安交易数据图表同步器 - Tampermonkey 脚本

> **一键同步所有交易图表** | 即时同步币安**合约**交易数据页面所有图表的时间周期 | 支持 Binance.com、BinanceZH.com 和 Binance.us

⚠️ **重要提示**: 此脚本**仅支持合约交易**，不支持现货交易数据图表。

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Tampermonkey](https://img.shields.io/badge/Tampermonkey-Script-green.svg)](https://www.tampermonkey.net/)
[![Version](https://img.shields.io/badge/version-7.0.0-blue.svg)](https://github.com/yourusername/binance-chart-sync)

## 🎯 功能介绍

这是一个 Tampermonkey 用户脚本,可以自动同步币安**合约**交易数据标签页中**所有图表**的时间周期。无需手动逐个修改每个图表的时间框架(5分、15分、1时、4时等),只需**点击一次**,所有图表即可立即更新。

非常适合以下交易者:
- 📊 需要同时分析多个合约交易指标
- ⏰ 需要频繁切换时间框架
- 🚀 希望节省时间,提高效率
- 💹 在币安**合约**市场交易

**注意**: 此脚本专为**合约交易设计**,不支持现货交易图表。

## ✨ 核心特性

- **🎯 一键同步**: 即时将所有图表(成交量、持仓量、多空比、资金费率等)同步到相同时间框架
- **⚡ 快速流畅**: 优化的延迟设置(图表间延迟 500ms),实现快速同步
- **🎨 精美界面**: 现代化可拖动浮动面板,渐变设计
- **🖱️ 拖拽功能**: 主面板和迷你按钮都支持拖拽
- **📍 智能显示**: 仅在"交易数据"标签页显示,其他页面自动隐藏
- **⌨️ 键盘快捷键**: `Option+S` (Mac) / `Alt+S` (Windows/Linux) 切换面板
- **✅ 自动完成**: 同步完成后自动滚动到顶部并最小化
- **🔄 进度跟踪**: 实时进度条显示同步状态
- **🎯 跳过重复**: 智能跳过已经设置为目标周期的图表
- **💾 位置记忆**: 跨页面刷新记住面板位置

## 📦 安装

### 前置要求
- 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展
  - Chrome: [Chrome 网上应用店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
  - Firefox: [Firefox 附加组件](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)
  - Edge: [Edge 加载项](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd)
  - Safari: [Mac App Store](https://apps.apple.com/us/app/tampermonkey/id1482490089)

### 安装脚本

1. 点击浏览器中的 Tampermonkey 图标
2. 选择"创建新脚本"
3. 从 `trade-chart-sync.js` 复制并粘贴完整脚本
4. 保存 (Ctrl+S / Cmd+S)
5. 访问币安交易页面并切换到"交易数据"标签页

## 🚀 使用方法

### 基本使用

1. **进入币安合约交易数据标签页**
   - 访问任意币安**合约**交易页面(例如: BTCUSDT 永续合约)
   - 点击"交易数据"标签页
   - ⚠️ **必须是合约页面**,不是现货交易页面

2. **打开同步面板**
   - 迷你按钮(📈)会自动出现
   - 点击迷你按钮展开面板
   - 或按 `Option+S` (Mac) / `Alt+S` (Windows/Linux)

3. **同步图表**
   - 点击任意时间框架按钮(5分、15分、30分、1时、2时、4时、6时、12时、1天)
   - 观察进度条显示所有图表的同步过程
   - 完成后面板自动最小化

### 面板控制

- **📈 迷你按钮**: 点击展开面板,拖动重新定位
- **_ (最小化)**: 隐藏面板但保持迷你按钮可见
- **✕ (关闭)**: 完全隐藏面板和按钮(使用快捷键重新打开)
- **🔍 扫描图表**: 列出当前视图中检测到的所有图表
- **⏹ 停止**: 取消正在进行的同步

### 支持的时间周期

- **5分** - 5 分钟
- **15分** - 15 分钟
- **30分** - 30 分钟
- **1时** - 1 小时
- **2时** - 2 小时
- **4时** - 4 小时
- **6时** - 6 小时
- **12时** - 12 小时
- **1天** - 1 天

## 🎬 工作原理

### 同步流程

1. **图表检测**: 扫描交易数据标签页中的所有图表
2. **智能过滤**: 识别需要更新的图表
3. **顺序同步**: 以优化的延迟更新每个图表
4. **视觉反馈**: 通过动画显示实时进度
5. **自动完成**: 完成后滚动到顶部并最小化

### 支持的图表类型

此脚本可同步所有**合约**交易数据图表,包括:
- 📊 成交量
- 💰 持仓量 - **仅合约**
- 📈 大户持仓量多空比 - **仅合约**
- 👥 多空账户数比 - **仅合约**
- 🔄 合约主动买卖量 - **仅合约**
- 💸 资金费率 - **仅合约**
- 📉 基差 - **仅合约**
- 以及更多...

⚠️ **重要**: 这些图表**仅在合约交易中可用**。现货市场没有这些数据标签页。

## ⚙️ 配置选项

### 可调整设置(在代码中修改)

```javascript
const config = {
  debug: true,                    // 启用控制台日志
  clickDelay: 200,                // 点击操作之间的延迟(毫秒)
  chartSwitchDelay: 500,          // 图表切换之间的延迟(毫秒)
  panelPosition: { x: 20, y: 100 } // 初始面板位置
};
```

### 存储

脚本使用 `GM_setValue` / `GM_getValue` 记住:
- 面板位置
- 图表切换延迟偏好

## 🎨 界面自定义

面板采用现代深色主题,具有:
- **渐变背景**和发光效果
- **流畅动画**用于所有交互
- **响应式设计**适应窗口大小
- **彩色通知**:
  - 🟢 绿色 - 成功
  - 🔴 红色 - 错误
  - 🟡 黄色 - 警告
  - 🔵 蓝色 - 信息

## 🔧 故障排除

### 面板不显示
- ✅ 确保您在"交易数据"标签页
- ✅ 按 `Option+S` / `Alt+S` 切换可见性
- ✅ 检查 Tampermonkey 是否已启用
- ✅ 验证脚本已安装并激活

### 同步不工作
- ✅ **确保您在合约交易页面,而不是现货页面**
- ✅ 确认您在币安合约交易页面
- ✅ 等待页面完全加载后再同步
- ✅ 检查浏览器控制台是否有错误(F12)
- ✅ 尝试刷新页面

### 图表被跳过
- ℹ️ 已经处于目标周期的图表会自动跳过
- ℹ️ 这是正常的预期行为

## 🌐 支持的网站

- ✅ https://www.binance.com/*
- ✅ https://www.binancezh.com/*
- ✅ https://www.binance.us/*

## 📝 版本历史

### v7.0.0 (当前版本)
- ✨ 可拖动迷你按钮
- ✨ 标签页感知可见性(仅在交易数据标签页显示)
- ✨ 完成后自动滚动到顶部
- ⚡ 更快的同步速度(500ms 延迟)
- 🎨 增强的 UI 和更好的动画
- 🐛 修复迷你按钮点击/拖动冲突
- 🔧 改进下拉菜单检测逻辑

### 以前的版本
- v6.x - 同步后自动最小化
- v5.x - 添加键盘快捷键
- v4.x - 可拖动面板
- v3.x - 进度跟踪
- v2.x - 基本同步功能
- v1.x - 初始版本

## 🤝 贡献

欢迎贡献!您可以:
- 🐛 报告错误
- 💡 建议新功能
- 🔧 提交拉取请求
- 📖 改进文档

## 📄 许可证

MIT 许可证 - 可自由使用、修改和分发。

## 👤 作者

**YangRui**

## 🙏 致谢

- 为币安交易社区倾情打造
- 由 [Tampermonkey](https://www.tampermonkey.net/) 提供支持
- 灵感来自重视效率的交易者

## 📞 支持

如果您觉得这个脚本有帮助:
- ⭐ 给此仓库加星
- 🐛 在 GitHub 上报告问题
- 💬 分享给其他交易者
- ☕ 请我喝杯咖啡(可选)

---

**祝交易愉快! 📈💰**

*免责声明: 此脚本按原样提供。交易需自负风险。请务必做好自己的研究。*
